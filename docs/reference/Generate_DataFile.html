<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements,
a list of luminescence data and information before statistical analysis — Generate_DataFile • BayLum</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements,
a list of luminescence data and information before statistical analysis — Generate_DataFile" />

<meta property="og:description" content="This function is used to generate, from the BIN file(s), a list of values of:
Single-grain OSL intensities and associated uncertainties, regenerative doses, etc., which will be the input of the Bayesian models.
To be easy-to-use, this function requires a rigorous organisation - all needed files should be arranged in one folder -
of informations concerning each BIN file. 
It is possible to process data for various samples simultaneously and to consider more than one BIN file per sample." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BayLum</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/BayLum.html">
    <span class=" play"></span>
     
    Get Started
  </a>
</li>
<li>
  <a href="../reference/index.html">References</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/R-Lum/BayLum">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates, from one (or several) BIN-file(s) of Single-grain OSL measurements,
a list of luminescence data and information before statistical analysis</h1>
    
    <div class="hidden name"><code>Generate_DataFile.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function is used to generate, from the BIN file(s), a list of values of:
<b>Single-grain</b> OSL intensities and associated uncertainties, regenerative doses, etc., which will be the input of the Bayesian models.
To be easy-to-use, this function requires a rigorous organisation - all needed files should be arranged in one folder -
of informations concerning each BIN file. <br />
It is possible to process data for various samples simultaneously and to consider more than one BIN file per sample.</p>
    
    </div>

    <pre class="usage"><span class='fu'>Generate_DataFile</span>(<span class='no'>Path</span>, <span class='no'>FolderNames</span>, <span class='no'>Nb_sample</span>,
  <span class='kw'>Nb_binfile</span> <span class='kw'>=</span> <span class='fu'>length</span>(<span class='no'>FolderNames</span>), <span class='kw'>BinPerSample</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='no'>Nb_sample</span>),
  <span class='kw'>sepDP</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>","</span>), <span class='kw'>sepDE</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>","</span>), <span class='kw'>sepDS</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>","</span>), <span class='kw'>sepR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"="</span>),
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Path</th>
      <td><p>character (<strong>required</strong>): the path to the project folder, containing one or more subfolders in which the BIN files
are located. If it is not equal to "", it must be terminated by "/".</p></td>
    </tr>
    <tr>
      <th>FolderNames</th>
      <td><p>character (<strong>required</strong>): list of names of the sub-folders containing the BIN files</p><ul>
<li><p>each subfolder must contain a BIN file and associated csv files.
See details for more informations on associated csv files required in the subfolders.
If there is more than one BIN file per sample, see the details section for instructions regarding how to correctly fill the
<code>FolderNames</code> vector.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>Nb_sample</th>
      <td><p>integer (<strong>required</strong>): number of samples.</p></td>
    </tr>
    <tr>
      <th>Nb_binfile</th>
      <td><p>integer (with default): number of BIN files. It must be equal to, or greater than <code>Nb_sample</code>.</p></td>
    </tr>
    <tr>
      <th>BinPerSample</th>
      <td><p>integer vector (with default): vector with the number of BIN files per sample.
The length of this vector must be equal to <code>Nb_sample</code> and the sum of entries of this vector must be equal to <code>Nb_binfile</code>.
If there is more than one BIN file per sample, see the details section for instructions regarding how to correctly
fill <code>BinPerSample</code> vector.
Otherwise, this vector must contain a list of 1 values.</p></td>
    </tr>
    <tr>
      <th>sepDP</th>
      <td><p>character (with default): column separator in the DiscPose.csv files.</p></td>
    </tr>
    <tr>
      <th>sepDE</th>
      <td><p>character (with default): column separator in the DoseEnv.csv files.</p></td>
    </tr>
    <tr>
      <th>sepDS</th>
      <td><p>character (with default): column separator in the DoseLab.csv files.</p></td>
    </tr>
    <tr>
      <th>sepR</th>
      <td><p>character (with default): column separator in the Rule.csv files.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical (with default): enable/disable verbose mode</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments that can be passed to <a href='http://www.rdocumentation.org/packages/Luminescence/topics/read_BIN2R'>Luminescence::read_BIN2R</a>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing the following objects:</p><ul>
<li><p><b>LT</b> (one list per sample); each list contains all L/T values for the corresponding sample;</p></li>
<li><p><b>sLT</b> (one list per sample); each list contains all uncertainties on L/T values for the corresponding sample;</p></li>
<li><p><b>ITimes</b> (one list per sample); each list contains irradiation time values for the corresponding sample;</p></li>
<li><p><b>dLab</b>, a matrix containing in line <code>i</code>, the laboratory dose rate and its variance for sample <code>i</code>;</p></li>
<li><p><b>ddot_env</b>, a matrix containing in line <code>i</code>, the environmental dose rate and its variance (excluding the common error terms) for sample <code>i</code>;</p></li>
<li><p><b>regDose</b> (one list per sample); each list contains all regenerated doses;</p></li>
<li><p><b>J</b>, a vector giving, for each BIN file, the number of aliquots selected for the analysis;</p></li>
<li><p><b>K</b>, a vector giving, for each BIN file, the number of regenerative doses in the SAR protocol;</p></li>
<li><p><b>Nb_measurement</b>, a vector giving, for each BIN file, the number of measurements.<br /></p></li>
</ul>

<p><b>** How to save this list **</b><br /></p>
<p>You can save this list in a .RData object. To do this, you can use the fonction <code>save</code>.
Then, to load this list you can use the function <code>load</code> (see example section fore more details).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>With <code>Path</code> and <code>FolderNames</code>, this function goes to the subfolders containing the BIN files and associated information to compute
the luminescence data.<br /></p>
<p><b>** What are the required files in each subfolder? **</b><br /></p>
<p>Each subfolder can be named, for example, as the sample name followed by a number; it must contain:</p><ul>
<li><p><b>bin.BIN</b>: the bin file renamed as bin.BIN (note: the name of all files matters);</p></li>
<li><p><b>DiscPos.csv</b>: a two columns csv file containing the list of disc and grain position number of the previously selected grains
(typically this list will include the position of grains based on their sensitivity, recycling or other properties);</p></li>
<li><p><b>DoseEnv.csv</b>: a two columns file containing the observation of the natural (or environmental),
dose rate, and its non-shared variance (i.e. after removing all shared errors), both in Gy. Note: the user shall provide the squared value of the error associated
with the dose rate experienced by the sample grains in nature;</p></li>
<li><p><b>DoseSourve.csv</b>: a two columns file containing the observation of the laboratory dose rate,
and its variance (squared error) both in Gy;</p></li>
<li><p><b>rule.csv</b>: a csv file containing information on</p><ul>
<li><p><code>beginSignal=</code>  the first channel for summing the natural or regenerative OSL signal (typically 1 or 6);</p></li>
<li><p><code>endSignal=</code> the last channel for summing the natural or regenerative OSL signal (typically 5 or 10);</p></li>
<li><p><code>beginBackground=</code> the first channel for background estimation of the natural or regenerative OSL signal (typically 76 or 81);</p></li>
<li><p><code>endBackground=</code> the last channel for background estimation of the natural or regenerative OSL signal (typically 95 or 100);</p></li>
<li><p><code>beginTest=</code>,</p></li>
<li><p><code>endTest=</code>,</p></li>
<li><p><code>beginTestBackground=</code>,</p></li>
<li><p><code>endTestBackground=</code> same values as above, for the test dose response (typically the same values should be used);</p></li>
<li><p><code>inflatePercent=</code> uncertainty arising from the instrument reproducibility (typically 0.02, i.e. 2%);</p></li>
<li><p><code>nbOfLastCycleToRemove=</code> number of cycles at the end of the SAR protocol which should not be included in the dose response curve fitting
(typically 1 if only a recycling test is performed, or 2 if both recycling and IR depletion are tested).<br /></p></li>
</ul></li>
</ul>
    <p><b>** How to fill the</b> <code>FolderNames</code> <b>vector? **</b><br /></p>
<p><code>FolderNames</code> is a vector of length <code>Nb_binfile</code>. <code>FolderNames[i]</code> is the name (e.g., Sample1-File1, or successive names separated by "/" signs,
if BIN files are in subfolders, e.g. Sample1/File1) of the subfolder containing all informations on the BIN file of ID number <code>i</code>.
The names in <code>FolderNames</code> are ordered following two rules:</p><ul>
<li><p>The names in the <code>FolderNames</code> vector must be ordered following the sample order
(the names of subfolders containing BIN files for the same sample should follow each other in the <code>FolderNames</code> vector, e.g.
Sample1, Sample2-File1, Sample2-File2, etc.).</p></li>
<li><p>If stratigraphic constraints apply to samples, and so a <b>Bayesian model with stratigraphic constraints</b> is implemented,
then the names in the <code>FolderNames</code> vector must be ordered by order of increasing ages. <br />
For example, <code>FolderNames=c(noun1,noun2)</code>, in which case <code>noun1</code> (respectively, <code>noun2</code>) corresponds to the subfolder
name containing the BIN file of sample 1 (respectively of sample 2).
In addition, if we know that sample 1 is younger than sample 2, then <code>FolderNames</code> vector is correctly filled. <br />
If conversely, <code>FolderNames=c(noun2,noun1)</code>, the analysis performed by <code><a href='AgeS_Computation.html'>AgeS_Computation</a></code> would not be consistent.<br /></p></li>
</ul>
    <p><b>** How to fill the</b> <code>BinPerSample</code> <b>vector? **</b><br /></p>
<p><code>BinPerSample[i]</code> correponds to the number of BIN files for the sample whose number ID is equal to <code>i</code>.<br />
For example, let us consider a case with two samples (Sample1 and Sample2), with 2 BIN files for Sample1 and 1 for Sample2.
In this case, <code>Nb_binfile</code>=3 and <code>Nb_sample</code>=2.
The user may then set <code>FolderNames=c("Sample1-File1", "Sample1-File2", "Sample2-File1")</code>, in which case <code>"Sample1-File1"</code> is the name of the subfolder
containing the first BIN file for Sample1, <code>"Sample1-File2"</code> the name of the  subfolder for the second BIN file of Sample1; eventually,
<code>"Sample2-File1"</code> is the name of the subfolder containing the BIN file for the second sample. In this case, <code>BinPerSample=c(2,1)</code>.</p>
<p>For the general BIN-file structure, the reader is referred to the following website:
<code>http://www.nutech.dtu.dk/</code></p>
<p>The function <code>read_BIN2R</code> developped in <code>Luminescence</code> package is used to read the BIN files.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>read_BIN2R</code>, <code><a href='Concat_DataFile.html'>Concat_DataFile</a></code>, <code><a href='Generate_DataFile_MG.html'>Generate_DataFile_MG</a></code>, <code><a href='LT_RegenDose.html'>LT_RegenDose</a></code>
<code><a href='Age_Computation.html'>Age_Computation</a></code>, <code><a href='AgeS_Computation.html'>AgeS_Computation</a></code>, <code><a href='Palaeodose_Computation.html'>Palaeodose_Computation</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Example for one sample with one Bin File</span>
<span class='no'>path</span><span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata/samp1"</span>, <span class='st'>""</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"BayLum"</span>)
<span class='no'>folder</span><span class='kw'>=</span><span class='st'>""</span>
<span class='no'>nbsample</span><span class='kw'>=</span><span class='fl'>1</span>  <span class='co'># give the number of sample</span>
<span class='no'>Data</span> <span class='kw'>&lt;-</span> <span class='fu'>Generate_DataFile</span>(
 <span class='kw'>Path</span> <span class='kw'>=</span> <span class='no'>path</span>,
 <span class='kw'>FolderNames</span> <span class='kw'>=</span> <span class='no'>folder</span>,
 <span class='kw'>Nb_sample</span> <span class='kw'>=</span> <span class='no'>nbsample</span>,
 <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='fu'>str</span>(<span class='no'>Data</span>)</div><div class='output co'>#&gt; List of 9
#&gt;  $ LT            :List of 1
#&gt;   ..$ : num [1, 1:7] 2.042 0.842 1.678 3.826 4.258 ...
#&gt;  $ sLT           :List of 1
#&gt;   ..$ : num [1, 1:7] 0.344 0.162 0.328 0.803 0.941 ...
#&gt;  $ ITimes        :List of 1
#&gt;   ..$ : num [1, 1:6] 15 30 60 100 0 15
#&gt;  $ dLab          : num [1:2, 1] 1.53e-01 5.89e-05
#&gt;  $ ddot_env      : num [1:2, 1] 2.512 0.0563
#&gt;  $ regDose       :List of 1
#&gt;   ..$ : num [1, 1:6] 2.3 4.6 9.21 15.35 0 ...
#&gt;  $ J             : num 1
#&gt;  $ K             : num 6
#&gt;  $ Nb_measurement: num 16</div><div class='input'>
## to save information in RData object in folder containing bin file
# save(Data,file=c(paste(path,folder,'Data.RData',sep="")))
## to load information containing Data.RData object
# load(file=c(paste(path,folder,"Data.RData",sep="")))

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Claire Christophe, Sebastian Kreutzer, Anne Philippe, Guillaume Guerin

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Claire Christophe, Anne Philippe, Sebastian Kreutzer, Guillaume Guerin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

